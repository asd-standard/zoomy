<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Window System &#8212; PyZui 0.11 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=12dfc556" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=cc7d0dec" />
    <script src="../_static/documentation_options.js?v=086c1757"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Logging System" href="logging.html" />
    <link rel="prev" title="Tiling System" href="tilingsystem.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="window-system">
<h1>Window System<a class="headerlink" href="#window-system" title="Link to this heading">¶</a></h1>
<p>This document provides a comprehensive overview of the window system architecture in PyZUI,
explaining how the graphical user interface is structured, how user input is handled, and how
the application integrates with the PySide6 (Qt) framework to create an interactive zooming
interface.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The window system is responsible for:</p>
<ol class="arabic simple">
<li><p>Creating the main application window with menus and toolbar</p></li>
<li><p>Rendering the zooming user interface in real-time</p></li>
<li><p>Handling user input (mouse, keyboard, touch)</p></li>
<li><p>Managing dialogs for user interactions</p></li>
<li><p>Coordinating between UI events and scene updates</p></li>
<li><p>Providing visual feedback (selection borders, loading indicators)</p></li>
</ol>
<p>The system uses <strong>PySide6 (Qt6)</strong> as the GUI framework, providing cross-platform window
management, event handling, and rendering capabilities. The architecture follows the
Model-View pattern, where Scene/MediaObjects represent the data model and the window
system provides the interactive view.</p>
</section>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Link to this heading">¶</a></h2>
<p>The window system consists of the following components:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Application (QApplication)
│
└── MainWindow (QMainWindow)
    │   • Application window frame
    │   • Menu bar and actions
    │   • File operations (open/save)
    │   • Media import dialogs
    │   • Settings and configuration
    │   • Error message display
    │
    └── QZUI (QWidget + Thread)
        │   • Central rendering widget
        │   • Scene rendering coordination
        │   • Mouse event handling
        │   • Keyboard event handling
        │   • Wheel event handling (zoom)
        │   • Timer-based animation
        │   • Draft/high-quality rendering
        │
        └── Scene
            └── MediaObjects


DialogWindows (Static Container)
│   • Aggregates dialog components
│   • Provides unified interface
│
├── OpenNewStringInputDialog
│       • Create new text objects
│       • Color selection (24 recent colors)
│       • Custom color input (hex codes)
│       • Multi-line text support
│       • Color persistence
│
├── ModifyStringInputDialog
│       • Edit existing text objects
│       • Change text content
│       • Change text color
│       • Preserves original text
│
└── ZoomSensitivityDialog
        • Adjust zoom sensitivity (0-100)
        • Real-time sensitivity update
</pre></div>
</div>
<p><strong>UI Event Flow:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>User Input (Mouse/Keyboard)
        │
        ▼
┌─────────────────────────┐
│   Qt Event System       │
│   (Event Queue)         │
└────────────┬────────────┘
             │
             ▼
┌─────────────────────────┐
│   QZUI Event Handlers   │
│   • mousePressEvent     │
│   • mouseMoveEvent      │
│   • wheelEvent          │
│   • keyPressEvent       │
└────────────┬────────────┘
             │
             ▼
┌─────────────────────────┐
│   Scene/Object Update   │
│   • Set velocity        │
│   • Update position     │
│   • Update selection    │
└────────────┬────────────┘
             │
             ▼
┌─────────────────────────┐
│   Timer Triggers        │
│   (timerEvent)          │
└────────────┬────────────┘
             │
             ▼
┌─────────────────────────┐
│   QZUI.paintEvent       │
│   • Step physics        │
│   • Render scene        │
│   • Draw selection      │
└─────────────────────────┘
</pre></div>
</div>
</section>
<section id="core-components">
<h2>Core Components<a class="headerlink" href="#core-components" title="Link to this heading">¶</a></h2>
<section id="mainwindow">
<h3>MainWindow<a class="headerlink" href="#mainwindow" title="Link to this heading">¶</a></h3>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">MainWindow</span></code> class extends <code class="xref py py-class docutils literal notranslate"><span class="pre">QMainWindow</span></code> and serves as the main
application window, providing menus, actions, and file operations.</p>
<p><strong>Class Definition:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MainWindow</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">framerate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
                 <span class="n">zoom_sensitivity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMainWindow</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;PyZUI&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span> <span class="o">=</span> <span class="n">QZUI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">framerate</span><span class="p">,</span> <span class="n">zoom_sensitivity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__create_actions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__create_menus</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Key Attributes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">zui</span></code>: Central QZUI widget for rendering</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__action</span></code>: Dictionary of QAction objects for menu items</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__menu</span></code>: Dictionary of QMenu objects</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__prev_dir</span></code>: Last used directory for file dialogs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__logger</span></code>: Logger instance for error reporting</p></li>
</ul>
<p><strong>Window Properties:</strong></p>
<ul class="simple">
<li><p><strong>Default Size</strong>: 1280x720 pixels (sizeHint)</p></li>
<li><p><strong>Minimum Size</strong>: 160x120 pixels (minimumSizeHint)</p></li>
<li><p><strong>Resizable</strong>: Yes, viewport adapts to window size</p></li>
</ul>
<p><strong>Menu Structure:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>File
├── New Scene                   (Ctrl+N)
├── Open Scene                  (Ctrl+O)
├── Open Home Scene             (Ctrl+Home)
├── Save Scene                  (Ctrl+S)
├── Save Screenshot             (Ctrl+H)
├── Open Local Media            (Ctrl+L)
├── Open new String             (Ctrl+U)
├── Open Media Directory        (Ctrl+D)
└── Quit                        (Ctrl+Q)

View
├── Set Framerate ▶
│   ├── 10 FPS
│   ├── 20 FPS
│   ├── 30 FPS
│   └── 40 FPS
├── Adjust Sensitivity
└── Fullscreen                  (Ctrl+F)

Help
├── About
└── About Qt
</pre></div>
</div>
<p><strong>Key Methods:</strong></p>
<section id="scene-operations">
<h4>Scene Operations<a class="headerlink" href="#scene-operations" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">__action_new_scene</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new empty scene.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">Scene</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__action_open_scene</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open scene from .pzs file via file dialog.&quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Open scene&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prev_dir</span><span class="p">,</span>
        <span class="s2">&quot;PyZUI Scenes (*.pzs)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">Scene</span><span class="o">.</span><span class="n">load_scene</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__action_save_scene</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save current scene to .pzs file.&quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Save scene&quot;</span><span class="p">,</span> <span class="s2">&quot;scene.pzs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PyZUI Scenes (*.pzs)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__action_save_screenshot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save screenshot to image file.&quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Save screenshot&quot;</span><span class="p">,</span> <span class="s2">&quot;screenshot.png&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Images (*.bmp *.jpg *.png ...)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="n">pixmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">grab</span><span class="p">()</span>
        <span class="n">pixmap</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="media-import">
<h4>Media Import<a class="headerlink" href="#media-import" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">__open_media</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">add</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open media and optionally add to scene.&quot;&quot;&quot;</span>
    <span class="c1"># Detect media type from file extension</span>
    <span class="k">if</span> <span class="n">media_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;string:&#39;</span><span class="p">):</span>
        <span class="n">mediaobject</span> <span class="o">=</span> <span class="n">StringMediaObject</span><span class="p">(</span><span class="n">media_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">media_id</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.svg&#39;</span><span class="p">):</span>
        <span class="n">mediaobject</span> <span class="o">=</span> <span class="n">SVGMediaObject</span><span class="p">(</span><span class="n">media_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mediaobject</span> <span class="o">=</span> <span class="n">TiledMediaObject</span><span class="p">(</span><span class="n">media_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add</span><span class="p">:</span>
        <span class="c1"># Fit to center 50% of viewport</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="n">mediaobject</span><span class="o">.</span><span class="n">fit</span><span class="p">((</span><span class="n">w</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="n">h</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="n">w</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="n">h</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mediaobject</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__action_open_media_local</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open single media file via file dialog.&quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Open local media&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prev_dir</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__open_media</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__action_open_media_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open string input dialog to create text object.&quot;&quot;&quot;</span>
    <span class="n">dialog</span> <span class="o">=</span> <span class="n">DialogWindows</span><span class="o">.</span><span class="n">open_new_string_input_dialog</span><span class="p">()</span>
    <span class="n">ok</span><span class="p">,</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">_run_dialog</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ok</span> <span class="ow">and</span> <span class="n">uri</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__open_media</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__action_open_media_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open all media files from directory in grid layout.&quot;&quot;&quot;</span>
    <span class="n">directory</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Open media directory&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prev_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
        <span class="c1"># Load all files</span>
        <span class="n">media</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
                <span class="n">mediaobject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__open_media</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mediaobject</span><span class="p">:</span>
                    <span class="n">media</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mediaobject</span><span class="p">)</span>

        <span class="c1"># Arrange in grid</span>
        <span class="n">cells_per_side</span> <span class="o">=</span> <span class="n">ceil</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">media</span><span class="p">)))</span>
        <span class="n">cellsize</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">/</span> <span class="n">cells_per_side</span>

        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cells_per_side</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cells_per_side</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">media</span><span class="p">:</span> <span class="k">break</span>
                <span class="n">mediaobject</span> <span class="o">=</span> <span class="n">media</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

                <span class="c1"># Position in grid cell</span>
                <span class="n">mediaobject</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
                <span class="n">mediaobject</span><span class="o">.</span><span class="n">centre</span> <span class="o">=</span> <span class="n">centre</span>
                <span class="n">mediaobject</span><span class="o">.</span><span class="n">aim</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">grid_centre</span><span class="p">)</span> <span class="o">*</span> <span class="n">cellsize</span><span class="p">)</span>
                <span class="n">mediaobject</span><span class="o">.</span><span class="n">aim</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">grid_centre</span><span class="p">)</span> <span class="o">*</span> <span class="n">cellsize</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mediaobject</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="view-settings">
<h4>View Settings<a class="headerlink" href="#view-settings" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">__action_set_fps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">act</span><span class="p">:</span> <span class="n">QAction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set framerate from action group.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">framerate</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">act</span><span class="o">.</span><span class="n">fps</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__action_set_zoom_sensitivity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open dialog to adjust zoom sensitivity.&quot;&quot;&quot;</span>
    <span class="n">ok</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">DialogWindows</span><span class="o">.</span><span class="n">_open_zoom_sensitivity_input_dialog</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">zoom_sensitivity</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ok</span> <span class="ow">and</span> <span class="n">text</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">zoom_sensitivity</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">zoom_sensitivity</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__action_fullscreen</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Toggle fullscreen mode.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setWindowState</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">windowState</span><span class="p">()</span> <span class="o">^</span> <span class="n">Qt</span><span class="o">.</span><span class="n">WindowFullScreen</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="error-handling">
<h4>Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">__show_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">details</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Display error dialog with details.&quot;&quot;&quot;</span>
    <span class="n">dialog</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;PyZUI - Error&quot;</span><span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">setDetailedText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">details</span><span class="p">))</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Quit Confirmation:</strong></p>
<p>When the user attempts to quit (Ctrl+Q), a confirmation dialog is shown with three options:</p>
<ul class="simple">
<li><p><strong>Yes</strong>: Quit without saving</p></li>
<li><p><strong>No</strong>: Cancel quit</p></li>
<li><p><strong>Save and Quit</strong>: Save scene then quit</p></li>
</ul>
</section>
</section>
<section id="qzui-widget">
<h3>QZUI Widget<a class="headerlink" href="#qzui-widget" title="Link to this heading">¶</a></h3>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">QZUI</span></code> class extends both <code class="xref py py-class docutils literal notranslate"><span class="pre">QWidget</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>, serving as
the central rendering widget that displays the scene and handles user input.</p>
<p><strong>Class Definition:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">QZUI</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">Thread</span><span class="p">):</span>
    <span class="c1"># Signal for error reporting</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">framerate</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                 <span class="n">zoom_sensitivity</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__scene</span> <span class="o">=</span> <span class="n">Scene</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__timer</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QBasicTimer</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">framerate</span> <span class="o">=</span> <span class="n">framerate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_sensitivity</span> <span class="o">=</span> <span class="n">zoom_sensitivity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reduced_framerate</span> <span class="o">=</span> <span class="mi">3</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setFocusPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ClickFocus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMouseTracking</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Key Attributes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__scene</span></code>: The Scene object being rendered</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__timer</span></code>: QBasicTimer for animation updates</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framerate</span></code>: Target framerate (default: 10 FPS)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zoom_sensitivity</span></code>: Zoom speed (default: 20)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reduced_framerate</span></code>: Framerate when idle (default: 3 FPS)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__draft</span></code>: Boolean flag for draft vs high-quality rendering</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__mouse_left_down</span></code>: Left mouse button state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__mouse_right_down</span></code>: Right mouse button state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__mousepos</span></code>: Current mouse position (x, y)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__shift_held</span></code>: Shift key state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__alt_held</span></code>: Alt key state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__dropped_frames</span></code>: Counter for frame skipping</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__active_object</span></code>: Currently active object (scene or selection)</p></li>
</ul>
<p><strong>Active Object Logic:</strong></p>
<p>The active object determines what gets moved/zoomed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__active_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the currently active object (selection or scene).&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">selection</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">selection</span>  <span class="c1"># Selected object</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span>  <span class="c1"># Whole scene</span>
</pre></div>
</div>
<section id="rendering-system">
<h4>Rendering System<a class="headerlink" href="#rendering-system" title="Link to this heading">¶</a></h4>
<p>The rendering system uses a timer-based approach with frame dropping for performance:</p>
<p><strong>Paint Event:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QPaintEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom painting - render the scene.&quot;&quot;&quot;</span>
    <span class="c1"># Step physics simulation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">)</span>

    <span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">()</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">begin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Fill background</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>

        <span class="c1"># Render scene (draft or high-quality)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">painter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__draft</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>

    <span class="c1"># Stop velocity if dragging</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mouse_left_down</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">vx</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">vy</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p><strong>Timer Event:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">timerEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QTimerEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle timer ticks for animation.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">moving</span><span class="p">:</span>
        <span class="c1"># Scene is animating - use draft mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dropped_frames</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__draft</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>  <span class="c1"># Trigger repaint</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Scene is idle - can do high-quality rendering</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dropped_frames</span> <span class="o">&gt;=</span> <span class="n">framerate</span> <span class="o">/</span> <span class="n">reduced_framerate</span><span class="p">:</span>
            <span class="c1"># Enough frames dropped, do HQ render</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dropped_frames</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__draft</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Drop this frame</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dropped_frames</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Rendering Modes:</strong></p>
<ul class="simple">
<li><p><strong>Draft Mode</strong>: Fast rendering when scene is moving
- Used during animation
- Lower quality but responsive</p></li>
<li><p><strong>High-Quality Mode</strong>: Slow rendering when scene is idle
- Used after animation stops
- Higher quality but expensive
- Only rendered at reduced framerate (e.g., 3 FPS)</p></li>
</ul>
</section>
<section id="mouse-event-handling">
<h4>Mouse Event Handling<a class="headerlink" href="#mouse-event-handling" title="Link to this heading">¶</a></h4>
<p><strong>Mouse Press:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle mouse button press.&quot;&quot;&quot;</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">()),</span>
           <span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">()))</span>

    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__mouse_left_down</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__mousepos</span> <span class="o">=</span> <span class="n">pos</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shift_held</span><span class="p">:</span>
            <span class="c1"># Select object under cursor</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">RightButton</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__mouse_right_down</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__mousepos</span> <span class="o">=</span> <span class="n">pos</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shift_held</span><span class="p">:</span>
            <span class="c1"># Right-click selection (for editing)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">right_selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Mouse Move:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle mouse movement (dragging).&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">buttons</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mouse_left_down</span><span class="p">:</span>
        <span class="c1"># Calculate mouse delta</span>
        <span class="n">mx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mousepos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">my</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mousepos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Set velocity to reach mouse position in one frame</span>
        <span class="n">t</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">framerate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">aim</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">aim</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

    <span class="c1"># Update mouse position</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__mousepos</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">()),</span>
                      <span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">()))</span>
</pre></div>
</div>
<p><strong>Mouse Release:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">mouseReleaseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle mouse button release.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__mouse_left_down</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p><strong>Mouse Wheel (Zoom):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">wheelEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QWheelEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle mouse wheel for zooming.&quot;&quot;&quot;</span>
    <span class="n">num_degrees</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">angleDelta</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
    <span class="n">num_steps</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">num_degrees</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoom_sensitivity</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__mousepos</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">()),</span>
                      <span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">()))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__zoom</span><span class="p">(</span><span class="n">num_steps</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">__zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_steps</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Zoom active object by num_steps.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__alt_held</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mi">16</span>  <span class="c1"># Fine zoom with Alt</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="c1"># Set zoom center to mouse position</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">centre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mousepos</span>
    <span class="c1"># Add to zoom velocity</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">vz</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="n">num_steps</span>
</pre></div>
</div>
</section>
<section id="keyboard-event-handling">
<h4>Keyboard Event Handling<a class="headerlink" href="#keyboard-event-handling" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QKeyEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle key press events.&quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span>

    <span class="c1"># Navigation</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Escape</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_PageUp</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__zoom</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># Zoom in</span>

    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_PageDown</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__zoom</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># Zoom out</span>

    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Up</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">vy</span> <span class="o">-=</span> <span class="n">move_amount</span>

    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Down</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">vy</span> <span class="o">+=</span> <span class="n">move_amount</span>

    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Left</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">vx</span> <span class="o">-=</span> <span class="n">move_amount</span>

    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Right</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active_object</span><span class="o">.</span><span class="n">vx</span> <span class="o">+=</span> <span class="n">move_amount</span>

    <span class="c1"># Centering</span>
    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Space</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centre</span><span class="p">()</span>  <span class="c1"># Center object under mouse</span>

    <span class="c1"># Object removal</span>
    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Delete</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">selection</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">selection</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Modifier keys</span>
    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Shift</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__shift_held</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Alt</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__alt_held</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">keyReleaseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QKeyEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle key release events.&quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Shift</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__shift_held</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Alt</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__alt_held</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p><strong>Keyboard Shortcuts:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Navigation:
    Arrow Keys      - Pan scene/object
    Page Up/Down    - Zoom in/out
    Mouse Wheel     - Zoom in/out
    Space           - Center object under cursor
    Alt + Action    - Fine control (1/16 speed)

Selection:
    Left Click      - Select object
    Right Click     - Right-select (for editing StringMediaObject)
    Escape          - Clear selection
    Shift + Click   - Interact without changing selection

Object Manipulation:
    Left Drag       - Move object/scene
    Wheel           - Zoom object/scene
    Delete          - Remove selected object
</pre></div>
</div>
</section>
</section>
</section>
<section id="dialog-system">
<h2>Dialog System<a class="headerlink" href="#dialog-system" title="Link to this heading">¶</a></h2>
<section id="dialogwindows-container">
<h3>DialogWindows Container<a class="headerlink" href="#dialogwindows-container" title="Link to this heading">¶</a></h3>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">DialogWindows</span></code> class serves as a static container for all dialog components:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DialogWindows</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Container for dialog-related functionality.&quot;&quot;&quot;</span>

    <span class="c1"># Static methods</span>
    <span class="n">_open_zoom_sensitivity_input_dialog</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c1"># Nested classes</span>
    <span class="n">open_new_string_input_dialog</span> <span class="o">=</span> <span class="n">OpenNewStringInputDialog</span>
    <span class="n">modify_string_input_dialog</span> <span class="o">=</span> <span class="n">ModifyStringInputDialog</span>
</pre></div>
</div>
</section>
<section id="opennewstringinputdialog">
<h3>OpenNewStringInputDialog<a class="headerlink" href="#opennewstringinputdialog" title="Link to this heading">¶</a></h3>
<p>Dialog for creating new text objects with color selection.</p>
<p><strong>Features:</strong></p>
<ul class="simple">
<li><p><strong>Text Input</strong>: Multi-line text editor with 16pt font</p></li>
<li><p><strong>Color Selection</strong>: Grid of 24 recently used colors</p></li>
<li><p><strong>Custom Colors</strong>: Hex color input field (e.g., #ff5733)</p></li>
<li><p><strong>Color Persistence</strong>: Recent colors saved to <code class="docutils literal notranslate"><span class="pre">~/.pyzui/colorstore/color_list.txt</span></code></p></li>
<li><p><strong>Color Display</strong>: Visual color squares next to hex codes</p></li>
</ul>
<p><strong>Dialog Layout:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>┌───────────────────────────────────────────────────┐
│  String input:                            [X]     │
├───────────────────────────────────────────────────┤
│                                                   │
│  ┌──────────────────────┐  ┌──────────┐           │
│  │                      │  │ ■ ff0000 │           │
│  │  Multi-line text     │  │ ■ 00ff00 │           │
│  │  editor              │  │ ■ 0000ff │           │
│  │  (QTextEdit)         │  │ ■ ffff00 │           │
│  │                      │  │ ■ ff00ff │           │
│  │                      │  │    ...   │           │
│  └──────────────────────┘  │          │           │
│  ┌──────────────────────┐  │          │           │
│  │ Custom color: #_____ │  │          │           │
│  └──────────────────────┘  └──────────┘           │
│                                                   │
│              [Cancel]  [OK]                       │
└───────────────────────────────────────────────────┘
</pre></div>
</div>
<p><strong>Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dialog</span> <span class="o">=</span> <span class="n">DialogWindows</span><span class="o">.</span><span class="n">open_new_string_input_dialog</span><span class="p">()</span>
<span class="n">ok</span><span class="p">,</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">_run_dialog</span><span class="p">()</span>

<span class="k">if</span> <span class="n">ok</span> <span class="ow">and</span> <span class="n">uri</span><span class="p">:</span>
    <span class="c1"># uri format: &quot;string:RRGGBB:text content&quot;</span>
    <span class="c1"># Example: &quot;string:ff0000:Hello World&quot;</span>
    <span class="n">mediaobject</span> <span class="o">=</span> <span class="n">StringMediaObject</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">scene</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Color Storage:</strong></p>
<p>Colors are stored in a deque (max 24 items) and persisted to disk:</p>
<ul class="simple">
<li><p><strong>Windows</strong>: <code class="docutils literal notranslate"><span class="pre">%APPDATA%\pyzui\colorstore\color_list.txt</span></code></p></li>
<li><p><strong>Unix/Linux</strong>: <code class="docutils literal notranslate"><span class="pre">~/.pyzui/colorstore/color_list.txt</span></code></p></li>
</ul>
<p>Format: One hex color per line (e.g., <code class="docutils literal notranslate"><span class="pre">ff0000</span></code>)</p>
</section>
<section id="modifystringinputdialog">
<h3>ModifyStringInputDialog<a class="headerlink" href="#modifystringinputdialog" title="Link to this heading">¶</a></h3>
<p>Dialog for editing existing text objects.</p>
<p><strong>Features:</strong></p>
<ul class="simple">
<li><p><strong>Pre-filled Text</strong>: Loads existing text from media_id</p></li>
<li><p><strong>Pre-selected Color</strong>: Shows current color</p></li>
<li><p><strong>Same Interface</strong>: Identical to OpenNewStringInputDialog</p></li>
<li><p><strong>Color Change</strong>: Can change text color</p></li>
<li><p><strong>Text Edit</strong>: Can modify text content</p></li>
</ul>
<p><strong>Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Right-click on StringMediaObject triggers this</span>
<span class="n">dialog</span> <span class="o">=</span> <span class="n">DialogWindows</span><span class="o">.</span><span class="n">modify_string_input_dialog</span><span class="p">(</span><span class="n">media_id</span><span class="p">)</span>
<span class="n">ok</span><span class="p">,</span> <span class="n">new_media_id</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">_run_dialog</span><span class="p">()</span>

<span class="k">if</span> <span class="n">ok</span> <span class="ow">and</span> <span class="n">new_media_id</span><span class="p">:</span>
    <span class="c1"># Update StringMediaObject properties</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_media_id</span> <span class="o">=</span> <span class="n">new_media_id</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_StringMediaObject__str</span> <span class="o">=</span> <span class="n">text</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_StringMediaObject__color</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="n">color</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">parsed_lines</span>
</pre></div>
</div>
<p><strong>Media ID Parsing:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parse existing media_id</span>
<span class="k">if</span> <span class="n">media_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;string:&#39;</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">media_id</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">13</span><span class="p">]</span>   <span class="c1"># Extract RRGGBB</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">media_id</span><span class="p">[</span><span class="mi">14</span><span class="p">:]</span>     <span class="c1"># Extract text content</span>
</pre></div>
</div>
</section>
<section id="zoomsensitivitydialog">
<h3>ZoomSensitivityDialog<a class="headerlink" href="#zoomsensitivitydialog" title="Link to this heading">¶</a></h3>
<p>Simple input dialog for adjusting zoom sensitivity.</p>
<p><strong>Features:</strong></p>
<ul class="simple">
<li><p><strong>Range</strong>: 0-100 (higher = more sensitive)</p></li>
<li><p><strong>Current Value</strong>: Displays current setting</p></li>
<li><p><strong>Real-time Update</strong>: Changes take effect immediately</p></li>
</ul>
<p><strong>Dialog:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>┌────────────────────────────────────────┐
│  Set zoom sensitivity           [X]    │
├────────────────────────────────────────┤
│                                        │
│  Sensitivity goes from 0 to 100,       │
│  current: 50                           │
│                                        │
│  ┌──────────────────────────────────┐  │
│  │ 50                               │  │
│  └──────────────────────────────────┘  │
│                                        │
│              [Cancel]  [OK]            │
└────────────────────────────────────────┘
</pre></div>
</div>
<p><strong>Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ok</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">DialogWindows</span><span class="o">.</span><span class="n">_open_zoom_sensitivity_input_dialog</span><span class="p">(</span>
    <span class="n">current_sensitivity</span><span class="p">)</span>

<span class="k">if</span> <span class="n">ok</span> <span class="ow">and</span> <span class="n">text</span><span class="p">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
        <span class="c1"># Convert to internal representation</span>
        <span class="n">zoom_sensitivity</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">zoom_sensitivity</span> <span class="o">=</span> <span class="mi">1000</span>  <span class="c1"># Maximum sensitivity</span>
</pre></div>
</div>
<p><strong>Sensitivity Mapping:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>User Value → Internal Value → Zoom Speed
──────────────────────────────────────────
100        → 10               → Fastest
50         → 20               → Medium
10         → 100              → Slow
1          → 1000             → Very slow
0          → 1000             → Maximum
</pre></div>
</div>
</section>
</section>
<section id="integration-patterns">
<h2>Integration Patterns<a class="headerlink" href="#integration-patterns" title="Link to this heading">¶</a></h2>
<section id="scene-and-window-communication">
<h3>Scene and Window Communication<a class="headerlink" href="#scene-and-window-communication" title="Link to this heading">¶</a></h3>
<p>The window system communicates with the scene through property access and method calls:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># MainWindow → QZUI → Scene</span>
<span class="n">main_window</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">new_scene</span>

<span class="c1"># QZUI → Scene (rendering)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">painter</span><span class="p">,</span> <span class="n">draft</span><span class="p">)</span>

<span class="c1"># QZUI → Scene (selection)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">mouse_pos</span><span class="p">)</span>

<span class="c1"># QZUI → Scene (modification)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mediaobject</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">mediaobject</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Signal/Slot Connections:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Error reporting from QZUI to MainWindow</span>
<span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">error</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__show_error</span><span class="p">)</span>

<span class="c1"># When QZUI encounters an error</span>
<span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;Error message&quot;</span><span class="p">,</span> <span class="n">details</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="viewport-resizing">
<h3>Viewport Resizing<a class="headerlink" href="#viewport-resizing" title="Link to this heading">¶</a></h3>
<p>When the window is resized, the scene viewport automatically adjusts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In QZUI.resizeEvent (implicit from QWidget)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QResizeEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle window resize.&quot;&quot;&quot;</span>
    <span class="c1"># Qt automatically triggers this</span>
    <span class="c1"># Scene viewport_size property handles the update</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">viewport_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
</pre></div>
</div>
<p>The Scene’s <code class="docutils literal notranslate"><span class="pre">viewport_size</span></code> setter handles:</p>
<ol class="arabic simple">
<li><p>Centering the scene in new viewport</p></li>
<li><p>Scaling to maintain apparent size</p></li>
<li><p>Updating all MediaObject positions</p></li>
</ol>
</section>
<section id="selection-visualization">
<h3>Selection Visualization<a class="headerlink" href="#selection-visualization" title="Link to this heading">¶</a></h3>
<p>Selected objects are highlighted with colored borders:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In Scene.render()</span>
<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selection</span><span class="p">:</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">topleft</span>
    <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">bottomright</span>

    <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>  <span class="c1"># Green for left-click selection</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawRect</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="o">-</span><span class="n">x1</span><span class="p">,</span> <span class="n">y2</span><span class="o">-</span><span class="n">y1</span><span class="p">)</span>

<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">right_selection</span><span class="p">:</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">right_selection</span><span class="o">.</span><span class="n">topleft</span>
    <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">right_selection</span><span class="o">.</span><span class="n">bottomright</span>

    <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>  <span class="c1"># Blue for right-click selection</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawRect</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="o">-</span><span class="n">x1</span><span class="p">,</span> <span class="n">y2</span><span class="o">-</span><span class="n">y1</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="performance-optimization">
<h2>Performance Optimization<a class="headerlink" href="#performance-optimization" title="Link to this heading">¶</a></h2>
<section id="frame-rate-management">
<h3>Frame Rate Management<a class="headerlink" href="#frame-rate-management" title="Link to this heading">¶</a></h3>
<p>The window system uses adaptive frame rates to balance responsiveness and quality:</p>
<p><strong>Normal Operation:</strong></p>
<ul class="simple">
<li><p><strong>Target Framerate</strong>: 10 FPS (configurable: 10, 20, 30, 40)</p></li>
<li><p><strong>Rendering Mode</strong>: Draft (fast)</p></li>
<li><p><strong>Triggered</strong>: When scene.moving is True</p></li>
</ul>
<p><strong>Idle Optimization:</strong></p>
<ul class="simple">
<li><p><strong>Reduced Framerate</strong>: 3 FPS</p></li>
<li><p><strong>Rendering Mode</strong>: High-quality (slow)</p></li>
<li><p><strong>Triggered</strong>: When scene.moving is False</p></li>
</ul>
<p><strong>Frame Dropping Logic:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">frames_to_skip</span> <span class="o">=</span> <span class="n">framerate</span> <span class="o">/</span> <span class="n">reduced_framerate</span>
<span class="c1"># Example: 10 / 3 ≈ 3 frames</span>

<span class="c1"># Drop 3 frames, then do HQ render on 4th frame</span>
<span class="c1"># Effective rate: 10 FPS → ~2.5 FPS for HQ rendering</span>
</pre></div>
</div>
</section>
<section id="draft-vs-high-quality-rendering">
<h3>Draft vs High-Quality Rendering<a class="headerlink" href="#draft-vs-high-quality-rendering" title="Link to this heading">¶</a></h3>
<p><strong>Draft Mode:</strong></p>
<ul class="simple">
<li><p>Used during animation and interaction</p></li>
<li><p>Fast tile scaling (Qt.FastTransformation)</p></li>
<li><p>Temporary tile caching</p></li>
<li><p>Lower visual quality but responsive</p></li>
</ul>
<p><strong>High-Quality Mode:</strong></p>
<ul class="simple">
<li><p>Used when idle</p></li>
<li><p>Better tile rendering</p></li>
<li><p>Final tile loading</p></li>
<li><p>Higher visual quality but slower</p></li>
</ul>
</section>
<section id="memory-management">
<h3>Memory Management<a class="headerlink" href="#memory-management" title="Link to this heading">¶</a></h3>
<p><strong>Tile Caching:</strong></p>
<p>The window system triggers tile loading through the rendering pipeline:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># TiledMediaObject.render() loads tiles on demand</span>
<span class="c1"># TileManager caches tiles in memory (LRU)</span>
<span class="c1"># Old tiles automatically purged when scene objects removed</span>
</pre></div>
</div>
<p><strong>Scene Object Limits:</strong></p>
<p>No hard limit on objects, but performance degrades with:</p>
<ul class="simple">
<li><p>More than ~100 visible objects</p></li>
<li><p>Very large viewport sizes</p></li>
<li><p>High frame rates (30-40 FPS)</p></li>
</ul>
</section>
</section>
<section id="event-handling-details">
<h2>Event Handling Details<a class="headerlink" href="#event-handling-details" title="Link to this heading">¶</a></h2>
<section id="event-propagation">
<h3>Event Propagation<a class="headerlink" href="#event-propagation" title="Link to this heading">¶</a></h3>
<p>Qt events propagate through the widget hierarchy:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>QApplication
    │
    ▼
MainWindow
    │
    ▼
QZUI (central widget)
    │
    ▼
Event handlers
    • mousePressEvent
    • mouseMoveEvent
    • keyPressEvent
    • etc.
</pre></div>
</div>
<p><strong>Event Acceptance:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># Handle event</span>
    <span class="o">...</span>
    <span class="c1"># Event is implicitly accepted</span>
    <span class="c1"># (doesn&#39;t propagate to parent)</span>
</pre></div>
</div>
</section>
<section id="mouse-tracking">
<h3>Mouse Tracking<a class="headerlink" href="#mouse-tracking" title="Link to this heading">¶</a></h3>
<p>Mouse tracking is enabled to receive move events even without buttons pressed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">setMouseTracking</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This allows:</p>
<ul class="simple">
<li><p>Updating <code class="docutils literal notranslate"><span class="pre">__mousepos</span></code> continuously</p></li>
<li><p>Zoom centering on mouse position</p></li>
<li><p>Cursor position tracking</p></li>
</ul>
</section>
<section id="focus-policy">
<h3>Focus Policy<a class="headerlink" href="#focus-policy" title="Link to this heading">¶</a></h3>
<p>The QZUI widget uses click focus:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">setFocusPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ClickFocus</span><span class="p">)</span>
</pre></div>
</div>
<p>This means:</p>
<ul class="simple">
<li><p>Keyboard events only received when widget has focus</p></li>
<li><p>Focus gained by clicking widget</p></li>
<li><p>Focus automatically set when MainWindow shown</p></li>
</ul>
</section>
<section id="thread-safety">
<h3>Thread Safety<a class="headerlink" href="#thread-safety" title="Link to this heading">¶</a></h3>
<p>The QZUI class extends Thread but doesn’t actually use threading for rendering.
Instead, Qt’s event loop handles all updates:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">QZUI</span><span class="p">(</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">Thread</span><span class="p">):</span>
    <span class="c1"># Thread inheritance is legacy</span>
    <span class="c1"># All rendering happens in main Qt thread</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>Timer-based Updates:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Timer runs in main thread</span>
<span class="bp">self</span><span class="o">.</span><span class="n">__timer</span> <span class="o">=</span> <span class="n">QBasicTimer</span><span class="p">()</span>
<span class="bp">self</span><span class="o">.</span><span class="n">__timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">framerate</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

<span class="c1"># timerEvent called in main thread</span>
<span class="k">def</span><span class="w"> </span><span class="nf">timerEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>  <span class="c1"># Trigger repaint</span>
</pre></div>
</div>
</section>
</section>
<section id="usage-examples">
<h2>Usage Examples<a class="headerlink" href="#usage-examples" title="Link to this heading">¶</a></h2>
<section id="basic-application-setup">
<h3>Basic Application Setup<a class="headerlink" href="#basic-application-setup" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">PySide6.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QApplication</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyzui.windows.mainwindow</span><span class="w"> </span><span class="kn">import</span> <span class="n">MainWindow</span>

<span class="c1"># Create Qt application</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>

<span class="c1"># Create main window with custom settings</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">MainWindow</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">zoom_sensitivity</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="c1"># Show window</span>
<span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">window</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">1920</span><span class="p">,</span> <span class="mi">1080</span><span class="p">)</span>

<span class="c1"># Run event loop</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="custom-qzui-widget">
<h3>Custom QZUI Widget<a class="headerlink" href="#custom-qzui-widget" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Embed QZUI in custom window</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyzui.objects.scene.qzui</span><span class="w"> </span><span class="kn">import</span> <span class="n">QZUI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyzui.objects.scene.scene</span><span class="w"> </span><span class="kn">import</span> <span class="n">Scene</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomWindow</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="c1"># Create QZUI widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span> <span class="o">=</span> <span class="n">QZUI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">framerate</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">zoom_sensitivity</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="p">)</span>

        <span class="c1"># Load custom scene</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">Scene</span><span class="o">.</span><span class="n">load_scene</span><span class="p">(</span><span class="s1">&#39;custom.pzs&#39;</span><span class="p">)</span>

        <span class="c1"># Start animation timer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="programmatic-scene-manipulation">
<h3>Programmatic Scene Manipulation<a class="headerlink" href="#programmatic-scene-manipulation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Access scene through window</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">scene</span>

<span class="c1"># Add media programmatically</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyzui.objects.mediaobjects</span><span class="w"> </span><span class="kn">import</span> <span class="n">TiledMediaObject</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">TiledMediaObject</span><span class="p">(</span><span class="s1">&#39;photo.jpg&#39;</span><span class="p">,</span> <span class="n">scene</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">zoomlevel</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

<span class="c1"># Animate to position</span>
<span class="n">img</span><span class="o">.</span><span class="n">aim</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>  <span class="c1"># Move 500 pixels right</span>
<span class="n">img</span><span class="o">.</span><span class="n">aim</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># Zoom in by factor of 2</span>
</pre></div>
</div>
</section>
<section id="custom-dialogs">
<h3>Custom Dialogs<a class="headerlink" href="#custom-dialogs" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Custom string input</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyzui.windows.dialogwindows</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenNewStringInputDialog</span>

<span class="n">dialog</span> <span class="o">=</span> <span class="n">OpenNewStringInputDialog</span><span class="p">()</span>
<span class="n">ok</span><span class="p">,</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">_run_dialog</span><span class="p">()</span>

<span class="k">if</span> <span class="n">ok</span> <span class="ow">and</span> <span class="n">uri</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created string: </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># uri format: &quot;string:RRGGBB:text&quot;</span>
</pre></div>
</div>
</section>
<section id="event-filtering">
<h3>Event Filtering<a class="headerlink" href="#event-filtering" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install event filter to intercept events</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EventFilter</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">eventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">.</span><span class="n">KeyPress</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_F1</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Help requested&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># Event handled</span>
        <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># Continue propagation</span>

<span class="n">event_filter</span> <span class="o">=</span> <span class="n">EventFilter</span><span class="p">()</span>
<span class="n">window</span><span class="o">.</span><span class="n">zui</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="n">event_filter</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3>MainWindow<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MainWindow</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">framerate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
                 <span class="n">zoom_sensitivity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">sizeHint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QSize</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">minimumSizeHint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QSize</span>

    <span class="c1"># Public attributes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zui</span><span class="p">:</span> <span class="n">QZUI</span>
</pre></div>
</div>
</section>
<section id="qzui">
<h3>QZUI<a class="headerlink" href="#qzui" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">QZUI</span><span class="p">(</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">Thread</span><span class="p">):</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>  <span class="c1"># Qt signal for error reporting</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">framerate</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                 <span class="n">zoom_sensitivity</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>

    <span class="c1"># Properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">scene</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Scene</span>

    <span class="nd">@scene</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">scene</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scene</span><span class="p">:</span> <span class="n">Scene</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>

    <span class="c1"># Event handlers (called by Qt)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QPaintEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">timerEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QTimerEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wheelEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QWheelEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mouseReleaseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QMouseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QKeyEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">keyReleaseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">QKeyEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
<section id="dialogwindows">
<h3>DialogWindows<a class="headerlink" href="#dialogwindows" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DialogWindows</span><span class="p">:</span>
    <span class="c1"># Static container for dialog components</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_open_zoom_sensitivity_input_dialog</span><span class="p">(</span>
        <span class="n">current</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">open_new_string_input_dialog</span><span class="p">:</span>
        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">_run_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">modify_string_input_dialog</span><span class="p">:</span>
        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">_run_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="key-classes">
<h3>Key Classes<a class="headerlink" href="#key-classes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pyzui.windows.mainwindow.MainWindow</span></code> - Main application window</p></li>
<li><p><a class="reference internal" href="../pyzui/qzui.html#pyzui.objects.scene.qzui.QZUI" title="pyzui.objects.scene.qzui.QZUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyzui.objects.scene.qzui.QZUI</span></code></a> - Central rendering widget</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pyzui.windows.dialogwindows.dialogwindows.DialogWindows</span></code> - Dialog container</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pyzui.windows.dialogwindows.stringinputdialog.OpenNewStringInputDialog</span></code> - New string dialog</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pyzui.windows.dialogwindows.modifystringdialog.ModifyStringInputDialog</span></code> - Edit string dialog</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pyzui.windows.dialogwindows.zoomsensitivitydialog.open_zoom_sensitivity_input_dialog</span></code> - Zoom settings</p></li>
</ul>
</section>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="objectsystem.html"><span class="doc">Object System</span></a> - Scene and MediaObject architecture</p></li>
<li><p><a class="reference internal" href="tilingsystem.html"><span class="doc">Tiling System</span></a> - Tile rendering system</p></li>
<li><p><a class="reference internal" href="../usageinstructions/userinterface.html"><span class="doc">User Interface</span></a> - User interaction guide</p></li>
<li><p><a class="reference internal" href="projectstructure.html"><span class="doc">Project structure</span></a> - Overall project organization</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">PyZui</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/installation.html">PyZui installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/installation.html#dependencies">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/installation.html#running-pyzui">Running PyZUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/installation.html#generating-documentation">Generating Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage Instructions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usageinstructions/userinterface.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usageinstructions/programconfiguration.html">Program Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readingdocumentation.html">Reading Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="projectstructure.html">Project structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="objectsystem.html">Object System</a></li>
<li class="toctree-l1"><a class="reference internal" href="convertersystem.html">Converter System</a></li>
<li class="toctree-l1"><a class="reference internal" href="tiledmediaobject.html">Tiled media object</a></li>
<li class="toctree-l1"><a class="reference internal" href="tilingsystem.html">Tiling System</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Window System</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testing Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testingdocumentation/unittest.html">Unit Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testingdocumentation/integrationtest.html">Integration Testing Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Benchmarks Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../benchmarksdocumentation/qzuibenchmark.html">QZUI Benchmark Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarksdocumentation/converterbenchmark.html">Converter Benchmark Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contribution Guidelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributionguidelines/contributiongiudelines.html">Contribution Guidelines</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tilingsystem.html" title="previous chapter">Tiling System</a></li>
      <li>Next: <a href="logging.html" title="next chapter">Logging System</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, David Roberts, Andrea Silvestri.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/technicaldocumentation/windowsystem.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>